<!DOCTYPE html>
<html lang="id">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>UMKM Kelurahan Jeruk</title>
  <link rel="icon" type="image/png" href="asset/image/logo_jerukk.png" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="asset/css/style.css" />
</head>

<body>

  <!-- NAVBAR -->
  <nav class="navbar navbar-expand-lg bg-white shadow-sm">
    <div class="container">
      <a class="navbar-brand p-0 m-0 d-flex align-items-center" href="#">
        <img href="index.html" src="asset/image/logo_umkm_jeruk.png" alt="Logo UMKM" class="logo-navbar" />
      </a>

      <!-- Tombol hamburger untuk responsif -->
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
        aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <!-- Navigasi -->
      <div class="collapse navbar-collapse justify-content-center" id="navbarNav">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link fw-bold " href="#beranda">Beranda</a>
          </li>
          <li class="nav-item">
            <a class="nav-link fw-bold " href="#umkm">UMKM</a>
          </li>
          <li class="nav-item">
            <a class="nav-link fw-bold " href="#pesan">Pesan</a>
          </li>
          <li class="nav-item">
            <a class="nav-link fw-bold " href="#kontak">Kontak</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- HERO SECTION -->
  <section id="beranda" class="hero-section py-5">
    <br>
    <div class="container py-5">
      <div class="row align-items-center">
        <div class="col-lg-6 mb-4 mb-lg-0 pe-lg-5">
          <span class="display-5 fw-bold highlight-orange">Kelurahan</span>
          <span class="display-5 fw-bold">Jeruk</span>
          <h1 class="display-5 fw-bold">
            Eksplorasi <span class="highlight-orange">UMKM Lokal</span> yang Berkualitas
          </h1>
          <p class="lead text-muted text-justify">
            Kelurahan Jeruk terletak di Surabaya Timur dan dikenal sebagai kawasan yang terus berkembang. Wilayah ini
            memiliki
            potensi besar di bidang UMKM yang didukung melalui berbagai kegiatan pemberdayaan masyarakat. Dengan
            lingkungan yang
            tertata dan warga yang aktif, Kelurahan Jeruk menjadi contoh daerah yang mendorong pertumbuhan ekonomi lokal
            sambil
            menjaga budaya dan semangat gotong royong.
          </p>
        </div>
        <div class="col-lg-6 text-center position-relative ps-lg-5 ">
          <div id="carouselExampleIndicators" class="carousel slide shadow-orange rounded-4 overflow-hidden"
            data-bs-ride="carousel" data-bs-interval="2000">
            <div class="carousel-indicators">
              <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active"
                aria-label="Slide 1"></button>
              <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1"
                aria-label="Slide 2"></button>
              <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2"
                aria-label="Slide 3"></button>
            </div>
            <div class="carousel-inner">
              <div class="carousel-item active">
                <img src="asset/image/umkm.jpg" class="d-block w-100 rounded-4" alt="First slide"
                  style="object-fit: cover; height: 400px;">
              </div>
              <div class="carousel-item">
                <img src="asset/image/buningsih/bu ningsih.JPG" class="d-block w-100 rounded-4" alt="Second slide"
                  style="object-fit: cover; height: 400px;">
              </div>
              <div class="carousel-item">
                <img src="asset/image/umkm1.jpg" class="d-block w-100 rounded-4" alt="Third slide"
                  style="object-fit: cover; height: 400px;">
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- SEARCH SECTION -->
  <section id="search" class="search-section">
    <div class="container">
      <form class="search-form mx-auto">
        <!-- TOTAL UMKM CARD -->
        <div class="total-umkm-card">
          <div class="total-umkm-content">
            <div class="total-umkm-icon">üè™</div>
            <h1 class="total-umkm-number" id="total-umkm-count">0</h1>
            <div class="total-umkm-label">Total UMKM Terdaftar</div>
            <div class="total-umkm-description">
              UMKM yang terdaftar dan aktif di Kelurahan Jeruk
            </div>
          </div>
        </div>

        <div class="container">
          <div class="text-center py-2">
            <h2 class="fw-bolder mt-3">Kategori UMKM</h2>
            <p class="text-muted">Kategori UMKM yang tersedia di Kelurahan Jeruk</p>
          </div>
          <div class="row g-3 justify-content-center text-center" id="kategori-populer-container">
            <!-- Kategori akan ditampilkan oleh JavaScript -->
          </div>
        </div>

        <hr>

        <div class="mb-4 text-center">
          <label for="keyword" class="form-label">Pencarian</label>
          <div class="input-group">
            <input type="text" class="form-control main-search" id="keyword"
              placeholder="Cari produk atau layanan UMKM...">
            <button class="btn btn-orange" type="submit">Cari</button>
          </div>
        </div>

        <div class="row g-3 justify-content-center">
          <div class="col-md-5 col-sm-6">
            <label for="kategori" class="form-label text-center w-100">
              <span class="dropdown-icon">üìã</span>
              Kategori UMKM
            </label>
            <div class="custom-select-wrapper">
              <select class="form-select custom-select-arrow" id="kategori">
                <option value="">Semua Kategori</option>
                <option value="Kuliner">Kuliner</option>
                <option value="Retail">Retail</option>
                <option value="Jasa">Jasa</option>
              </select>
            </div>
          </div>
          <div class="col-md-5 col-sm-6 mb-3">
            <label for="lokasi" class="form-label text-center w-100">Lokasi</label>
            <input type="text" class="form-control" id="lokasi" placeholder="Contoh: RT 03 RW 02">
          </div>
        </div>
      </form>
    </div>
  </section>


  <!-- SECTION UMKM -->
  <section id="umkm" class="bg-light py-5">
    <div class="container">
      <div class="text-center mb-5">
        <h2 class="fw-bold">‚ú® UMKM Unggulan di Kelurahan Jeruk</h2>
        <p class="text-muted">Temukan UMKM terbaik yang dipercaya oleh warga sekitar.</p>
      </div>

      <div id="umkm-container" class="row g-4">
        <!-- Kartu UMKM akan dimasukkan di sini oleh JavaScript -->
      </div>
  </section>

  <section id="pesan" class="hero-section py-5">
    <div class="d-flex align-items-center justify-content-center mb-1">
      <img src="asset/image/logokkn.png" alt="Logo UMKM" class="logo-navbar me-3"
          style="width: 150px; height: 150px;" />
      <h2 class="fw-bold mb-0">KKN 87 PRABANARANGA</h2>
    </div>
    <div class="container py-5">
      <div class="row align-items-center">
        <!-- Kolom Carousel -->
        <div class="col-lg-6 mb-4 mb-lg-0">
          <div id="carouselExampleIndicators" class="carousel slide shadow-orange rounded-4 overflow-hidden"
            data-bs-ride="carousel" data-bs-interval="2000">
            <div class="carousel-indicators">
              <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active"
                aria-label="Slide 1"></button>
              <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1"
                aria-label="Slide 2"></button>
            </div>
            <div class="carousel-inner">
              <div class="carousel-item active">
                <img src="asset/image/bento.jpg" class="d-block w-100 rounded-4" alt="First slide"
                  style="object-fit: cover; height: 400px;">
              </div>
              <div class="carousel-item">
                <img src="asset/image/pasar.jpeg" class="d-block w-100 rounded-4" alt="Second slide"
                  style="object-fit: cover; height: 400px;">
              </div>
            </div>
          </div>
        </div>
        <!-- Kolom Teks -->
        <div class="col-lg-6">
          <span class="display-5 fw-bold highlight-orange">Pesan Kami</span> 
          <hr>
          <p class="lead text-muted text-justify">
            Kami hadir untuk mendukung kemajuan UMKM di Kelurahan Jeruk sebagai wujud nyata dari 
            semangat dan kemandirian warga. Kami percaya bahwa potensi lokal ini layak mendapatkan 
            ruang yang lebih luas agar dapat tumbuh, dikenal, dan bersaing di tengah perkembangan zaman.
          </p>
        </div>
      </div>
      <div class="text-end mt-5">
        <a href="#" class="btn btn-dark rounded-pill px-4 py-2 fw-semibold back-to-top">^</a>
      </div>
    </div>
  </section>


  <!-- FOOTER -->
  <footer id="kontak" class="bg-orange text-white pt-5">
    <div class="container">
      <div class="row g-4">
        <div class="col-md-6">
          <h5 class="fw-bold">UMKM Kelurahan Jeruk</h5>
          <p class="text-white-50">
            Website ini bertujuan untuk mempromosikan UMKM lokal di Kelurahan Jeruk, Lakarsantri, Surabaya.
          </p>
          <div class="d-flex gap-3 mt-3">
            <div class="d-flex gap-3 mt-3">
              <a href="#" class="text-white fs-5" aria-label="Facebook" title="Facebook">
                <i class="fab fa-facebook-f"></i>
              </a>
              <a href="#" class="text-white fs-5" aria-label="Instagram" title="Instagram">
                <i class="fab fa-instagram"></i>
              </a>
              <a href="#" class="text-white fs-5" aria-label="WhatsApp" title="WhatsApp">
                <i class="fab fa-whatsapp"></i>
              </a>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <h6 class="fw-semibold mb-3">Navigasi</h6>
          <ul class="list-unstyled">
            <li><a href="#beranda" class="text-white-50 text-decoration-none d-block mb-1">Beranda</a></li>
            <li><a href="#umkm" class="text-white-50 text-decoration-none d-block mb-1">UMKM Unggulan</a></li>
            <li><a href="#kontak" class="text-white-50 text-decoration-none d-block">Kontak</a></li>
          </ul>
        </div>
        <div class="col-md-3">
          <h6 class="fw-semibold mb-3">Kontak Kami</h6>
          <ul class="list-unstyled text-white-50">
            <li class="mb-2">
              <i class="fas fa-map-marker-alt me-2"></i>
              <a href="https://www.google.com/maps/place/Kelurahan+Jeruk,+Lakarsantri,+Surabaya" target="_blank"
                rel="noopener" class="text-white-50 text-decoration-none">
                Kelurahan Jeruk, Lakarsantri
              </a>
            </li>
            <li class="mb-2"><i class="fas fa-envelope me-2"></i>info@umkmjeruk.id</li>
            <li><i class="fas fa-phone me-2"></i>
              <a href="https://wa.me/6281234567890" target="_blank" rel="noopener noreferrer"
                class="text-white-50 text-decoration-none">
                0812-3456-7890
              </a>
            </li>
          </ul>
        </div>
      </div>

      <hr class="border-light mt-4" />
      <p class="text-center text-white-50 small mb-0">
        &copy; 2025 UMKM Jeruk ‚Äî Dibuat untuk KKN UPN Veteran Jawa Timur
      </p>
    </div>
  </footer>

  <script>
    let dataUMKM = [];

    // Navbar scroll effect
    window.addEventListener('scroll', () => {
      const navbar = document.querySelector('.navbar');
      navbar.style.boxShadow = window.scrollY > 50
        ? '0 4px 20px rgba(0, 0, 0, 0.1)'
        : '0 2px 10px rgba(0, 0, 0, 0.1)';
    });

    // Form input animation
    document.querySelectorAll('.form-control, .form-select').forEach(input => {
      input.addEventListener('focus', () => input.style.transform = 'translateY(-2px)');
      input.addEventListener('blur', () => input.style.transform = 'translateY(0)');
    });

    // Search button animation & filter trigger
    const searchBtn = document.querySelector('.btn-orange');
    if (searchBtn) {
      searchBtn.addEventListener('click', e => {
        e.preventDefault();
        const originalText = searchBtn.textContent;
        searchBtn.textContent = 'Mencari...';
        searchBtn.style.transform = 'translateY(-2px)';
        setTimeout(() => {
          searchBtn.textContent = originalText;
          searchBtn.style.transform = 'translateY(0)';
          filterUMKM();
        }, 1000);
      });
    }

    // Tampilkan total UMKM dengan animasi count-up
    function tampilkanTotalUMKM(data) {
      const totalElement = document.getElementById('total-umkm-count');
      if (!totalElement) return;

      const totalCount = data.length;
      let current = 0;
      const increment = totalCount / 30;
      const timer = setInterval(() => {
        current += increment;
        if (current >= totalCount) {
          current = totalCount;
          clearInterval(timer);
        }
        totalElement.textContent = Math.floor(current);
      }, 50);
    }

    // Tampilkan kategori populer dengan emoji
    function tampilkanKategoriPopuler(data) {
      const container = document.getElementById('kategori-populer-container');
      if (!container) return;

      container.innerHTML = '';
      const kategoriMap = {};

      data.forEach(umkm => {
        const kategori = umkm.kategori;
        kategoriMap[kategori] = (kategoriMap[kategori] || 0) + 1;
      });

      const sortedKategori = Object.entries(kategoriMap).sort((a, b) => b[1] - a[1]);

      sortedKategori.forEach(([kategori, jumlah], index) => {
        const col = document.createElement('div');
        col.className = 'col-md-4 col-lg-3';
        col.style.animationDelay = `${index * 0.2}s`;

        const icon = {
          'Kuliner': 'üçΩÔ∏è',
          'Retail': 'üõçÔ∏è',
          'Jasa': 'üîß'
        }[kategori] || 'üè™';

        col.innerHTML = `
        <div class="category-card">
          <div class="category-count">${jumlah}</div>
          <div class="category-name">${icon} ${kategori}</div>
          <div class="category-subtitle">${jumlah} UMKM aktif</div>
        </div>
      `;
        container.appendChild(col);
      });
    }

    // Render UMKM card
    function renderUMKM(data) {
      const container = document.getElementById('umkm-container');
      if (!container) return;

      container.innerHTML = data.length
        ? ''
        : `<div class="col-12 text-center py-5"><h5 class="text-muted">Tidak ada data yang cocok.</h5></div>`;

      const isMobile = window.innerWidth <= 768;

      data.forEach((umkm, i) => {
        const delay = isMobile ? i * 0.2 : i * 0.1;
        const card = document.createElement('div');
        card.className = isMobile ? 'col-12 card-loading' : 'col-md-6 col-lg-4 card-loading';
        card.style.animationDelay = `${delay}s`;

        card.innerHTML = `
        <a href="detail.html?nama_umkm=${umkm.nama_umkm}" class="text-decoration-none text-dark">
          <div class="card shadow-sm border-0 h-100">
            <div class="position-relative">
              <img src="${umkm.image}" class="card-img-top" alt="${umkm.nama_umkm}">
            </div>
            <div class="card-body">
              <h5 class="card-title fw-bold">${umkm.nama_umkm}</h5>
              <div class="d-flex align-items-center mt-3">
                <div>
                  <div class="fw-semibold">${umkm.pemilik}</div>
                  <small class="text-muted">${umkm.lokasi}</small>
                </div>
                <div class="ms-auto text-end">
                  <span class="badge rounded-pill bg-orange text-white mb-1">${umkm.kategori}</span>
                </div>
              </div>
            </div>
          </div>
        </a>`;
        container.appendChild(card);
      });

      // Animation reveal
      setTimeout(() => {
        container.querySelectorAll('.card-loading').forEach((card, i) => {
          setTimeout(() => {
            card.classList.remove('card-loading');
            card.classList.add('fade-in');
          }, i * (isMobile ? 200 : 100));
        });
      }, 100);
    }

    // Filter UMKM berdasarkan input
    function filterUMKM() {
      const kategori = document.getElementById('kategori')?.value.trim().toLowerCase() || '';
      const lokasi = document.getElementById('lokasi')?.value.trim().toLowerCase() || '';
      const keyword = document.getElementById('keyword')?.value.trim().toLowerCase() || '';

      const filtered = dataUMKM.filter(umkm => {
        const umkmKategori = (umkm.kategori || '').toLowerCase();
        const umkmLokasi = (umkm.lokasi || '').toLowerCase();
        const umkmNama = (umkm.nama_umkm || '').toLowerCase();
        const umkmPemilik = (umkm.pemilik || '').toLowerCase();

        const produk = Array.isArray(umkm.produk)
          ? umkm.produk.map(p => (p.nama || '').toLowerCase()).join(' ')
          : (umkm.produk || '').toLowerCase();

        const matchKategori = !kategori || umkmKategori === kategori;
        const matchLokasi = !lokasi || umkmLokasi.includes(lokasi);
        const matchKeyword = !keyword || [umkmNama, umkmPemilik, produk].some(str => str.includes(keyword));

        return matchKategori && matchLokasi && matchKeyword;
      });

      renderUMKM(filtered);
      tampilkanTotalUMKM(filtered);
      tampilkanKategoriPopuler(dataUMKM); // tetap semua kategori, bukan filtered
    }

    // Inisialisasi saat halaman siap
    document.addEventListener('DOMContentLoaded', () => {
      fetch('data_umkm.json')
        .then(res => res.json())
        .then(data => {
          dataUMKM = data;
          renderUMKM(dataUMKM);
          tampilkanTotalUMKM(dataUMKM);
          tampilkanKategoriPopuler(dataUMKM);
        })
        .catch(err => {
          console.error('Gagal memuat data UMKM:', err);
          document.getElementById('umkm-container').innerHTML = `
          <div class="col-12 text-center py-5 text-danger">
            <h5>Gagal memuat data UMKM.</h5>
            <p>${err.message}</p>
          </div>`;
        });

      // Filter listeners
      document.getElementById('kategori')?.addEventListener('change', filterUMKM);
      document.getElementById('lokasi')?.addEventListener('input', filterUMKM);
      document.getElementById('keyword')?.addEventListener('input', filterUMKM);

      // Optional: back to top
      document.querySelector('.back-to-top')?.addEventListener('click', e => {
        e.preventDefault();
        window.scrollTo({ top: 0, behavior: 'smooth' });
      });
    });
  </script>


  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>


</html>