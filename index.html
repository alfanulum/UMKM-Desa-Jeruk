<!DOCTYPE html>
<html lang="id">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>UMKM Kelurahan Jeruk</title>
  <link rel="icon" type="image/png" href="asset/image/logo_jerukk.png" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="asset/css/style.css" />
  <link
    href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans&family=Poppins&family=Raleway&family=Ubuntu&display=swap"
    rel="stylesheet" />
</head>

<body>

  <!-- NAVBAR -->
  <nav class="navbar navbar-expand-lg bg-white shadow-sm">
    <div class="container">
      <a class="navbar-brand p-0 m-0 d-flex align-items-center" href="#">
        <img src="asset/image/logo_umkm_jeruk.png" alt="Logo UMKM" class="logo-navbar" />
      </a>
    </div>
  </nav>

  <!-- HERO SECTION -->
  <section class="hero-section py-5">
    <br>
    <div class="container py-5">
      <div class="row align-items-center">
        <div class="col-lg-6 mb-4 mb-lg-0 pe-lg-5">
          <span class="display-5 fw-bold highlight-orange">Kelurahan Jeruk</span>
          <h1 class="display-5 fw-bold">
            Eksplorasi <span class="highlight-orange">UMKM Lokal</span> yang Berkualitas
          </h1>
          <p class="lead text-muted text-justify">
            Kelurahan Jeruk terletak di Surabaya Timur dan dikenal sebagai kawasan yang terus berkembang. Wilayah ini
            memiliki
            potensi besar di bidang UMKM yang didukung melalui berbagai kegiatan pemberdayaan masyarakat. Dengan
            lingkungan yang
            tertata dan warga yang aktif, Kelurahan Jeruk menjadi contoh daerah yang mendorong pertumbuhan ekonomi lokal
            sambil
            menjaga budaya dan semangat gotong royong.
          </p>
        </div>
        <div class="col-lg-6 text-center position-relative ps-lg-5">
          <div class="hero-image-wrapper">
            <img src="asset/image/umkm.jpg" class="img-fluid" alt="UMKM Image" />
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- SEARCH SECTION -->
  <section class="bg-white py-4">
    <div class="container">
      <form class="row g-2 align-items-end">
        <div class="col-md-4">
          <label for="kategori" class="form-label">Kategori UMKM</label>
          <select class="form-select" id="kategori">
            <option value="">Pilih Kategori</option>
            <option value="Kuliner">Kuliner</option>
            <option value="Toko Sembako">Toko Sembako</option>
            <option value="Jasa">Jasa</option>
          </select>
        </div>
        <div class="col-md-4">
          <label for="lokasi" class="form-label">Lokasi</label>
          <input type="text" class="form-control" id="lokasi" placeholder="Contoh: RT 03 RW 02" />
        </div>
        <div class="col-md-4">
          <label for="keyword" class="form-label">Pencarian</label>
          <div class="input-group">
            <input type="text" class="form-control" id="keyword" placeholder="Cari produk atau layanan..." />
            <button class="btn btn-orange" type="submit">Cari</button>
          </div>
        </div>
      </form>
    </div>
  </section>

  <!-- SECTION UMKM -->
  <section class="bg-light py-5">
    <div class="container">
      <div class="text-center mb-5">
        <h2 class="fw-bold">✨ UMKM Unggulan di Kelurahan Jeruk</h2>
        <p class="text-muted">Temukan UMKM terbaik yang dipercaya oleh warga sekitar.</p>
      </div>

      <div id="umkm-container" class="row g-4">
        <!-- Kartu UMKM akan dimasukkan di sini oleh JavaScript -->
      </div>

      <div class="text-end mt-5">
        <a href="#" class="btn btn-dark rounded-pill px-4 py-2 fw-semibold">^</a>
      </div>
    </div>
  </section>

  <!-- FOOTER -->
  <footer class="bg-orange text-white pt-5">
    <div class="container">
      <div class="row g-4">
        <div class="col-md-6">
          <h5 class="fw-bold">UMKM Kelurahan Jeruk</h5>
          <p class="text-white-50">
            Website ini bertujuan untuk mempromosikan UMKM lokal di Kelurahan Jeruk, Lakarsantri, Surabaya.
          </p>
          <div class="d-flex gap-3 mt-3">
            <div class="d-flex gap-3 mt-3">
              <a href="#" class="text-white fs-5" aria-label="Facebook" title="Facebook">
                <i class="fab fa-facebook-f"></i>
              </a>
              <a href="#" class="text-white fs-5" aria-label="Instagram" title="Instagram">
                <i class="fab fa-instagram"></i>
              </a>
              <a href="#" class="text-white fs-5" aria-label="WhatsApp" title="WhatsApp">
                <i class="fab fa-whatsapp"></i>
              </a>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <h6 class="fw-semibold mb-3">Navigasi</h6>
          <ul class="list-unstyled">
            <li><a href="#" class="text-white-50 text-decoration-none d-block mb-1">Beranda</a></li>
            <li><a href="#" class="text-white-50 text-decoration-none d-block mb-1">UMKM Unggulan</a></li>
            <li><a href="#" class="text-white-50 text-decoration-none d-block">Kontak</a></li>
          </ul>
        </div>
        <div class="col-md-3">
          <h6 class="fw-semibold mb-3">Kontak Kami</h6>
          <ul class="list-unstyled text-white-50">
            <li class="mb-2"><i class="fas fa-map-marker-alt me-2"></i>Kelurahan Jeruk, Lakarsantri</li>
            <li class="mb-2"><i class="fas fa-envelope me-2"></i>info@umkmjeruk.id</li>
            <li><i class="fas fa-phone me-2"></i>0812-3456-7890</li>
          </ul>
        </div>
      </div>

      <hr class="border-light mt-4" />
      <p class="text-center text-white-50 small mb-0">
        &copy; 2025 UMKM Jeruk — Dibuat untuk KKN UPN Veteran Jawa Timur
      </p>
    </div>
  </footer>

  <script>
    let dataUMKM = [];

    // Fungsi render kartu UMKM
    // Enhanced render function with mobile-specific sequential reveal
    function renderUMKM(data) {
      const container = document.getElementById('umkm-container');
      container.innerHTML = '';

      if (data.length === 0) {
        container.innerHTML = `<div class="col-12 text-center py-5"><h5 class="text-muted">Tidak ada data yang cocok.</h5></div>`;
        return;
      }

      // Check if mobile device
      const isMobile = window.innerWidth <= 768;

      data.forEach((umkm, index) => {
        // Create card element
        const cardElement = document.createElement('div');

        // Mobile: Single column with staggered timing
        if (isMobile) {
          cardElement.className = 'col-12 card-loading';
          // Increased delay for mobile to create nice sequential effect
          const delay = index * 0.2; // 200ms between each card
          cardElement.style.animationDelay = `${delay}s`;
        } else {
          // Desktop: 3 columns with shorter delays
          cardElement.className = 'col-md-6 col-lg-4 card-loading';
          const delay = index * 0.1;
          cardElement.style.animationDelay = `${delay}s`;
        }

        cardElement.innerHTML = `
      <div class="card shadow-sm border-0 h-100">
        <div class="position-relative">
          <img src="${umkm.image}" class="card-img-top" alt="${umkm.nama_umkm}">
        </div>
        <div class="card-body">
          <h5 class="card-title fw-bold">${umkm.nama_umkm}</h5>
          <div class="d-flex align-items-center mt-3">
            <div>
              <div class="fw-semibold">${umkm.pemilik}</div>
              <small class="text-muted">${umkm.lokasi}</small>
            </div>
            <div class="ms-auto text-end">
              <span class="badge rounded-pill bg-orange text-white mb-1">${umkm.kategori}</span>
            </div>
          </div>
        </div>
      </div>`;

        container.appendChild(cardElement);
      });

      // Trigger sequential reveal animation
      setTimeout(() => {
        const cards = container.querySelectorAll('.card-loading');
        cards.forEach((card, index) => {
          setTimeout(() => {
            card.classList.remove('card-loading');
            card.classList.add('fade-in');
          }, index * (isMobile ? 200 : 100)); // Staggered timing
        });
      }, 100);
    }

    // Enhanced intersection observer for scroll-triggered animations
    function setupScrollAnimations() {
      const observerOptions = {
        root: null,
        rootMargin: '0px 0px -100px 0px',
        threshold: 0.1
      };

      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            const card = entry.target;
            if (card.classList.contains('card-loading')) {
              card.classList.remove('card-loading');
              card.classList.add('fade-in');
            }
          }
        });
      }, observerOptions);

      // Observe all cards
      document.querySelectorAll('.card-loading').forEach(card => {
        observer.observe(card);
      });
    }

    // Update the main initialization
    document.addEventListener('DOMContentLoaded', () => {
      fetch('data_umkm.json')
        .then(response => response.json())
        .then(data => {
          dataUMKM = data;
          renderUMKM(dataUMKM);

          // Setup scroll animations after cards are rendered
          setTimeout(() => {
            setupScrollAnimations();
          }, 500);
        })
        .catch(error => {
          console.error('Gagal memuat data UMKM:', error);
          document.getElementById('umkm-container').innerHTML = `
        <div class="col-12 text-center py-5 text-danger">
          <h5>Gagal memuat data UMKM.</h5>
          <p>${error.message}</p>
        </div>`;
        });

      // Rest of your existing event listeners...
      document.querySelector('form').addEventListener('submit', function (e) {
        e.preventDefault();
        filterUMKM();
      });

      document.getElementById('kategori').addEventListener('change', filterUMKM);
      document.getElementById('lokasi').addEventListener('input', filterUMKM);
      document.getElementById('keyword').addEventListener('input', filterUMKM);
    });

    // Enhanced filter function with re-animation
    function filterUMKM() {
      const kategori = document.getElementById('kategori').value.trim();
      const lokasi = document.getElementById('lokasi').value.trim().toLowerCase();
      const keyword = document.getElementById('keyword').value.trim().toLowerCase();

      const filtered = dataUMKM.filter(umkm => {
        const umkmKategori = umkm.kategori.toLowerCase();
        const umkmLokasi = umkm.lokasi.toLowerCase();
        const umkmNama = umkm.nama_umkm.toLowerCase();
        const umkmPemilik = umkm.pemilik.toLowerCase();
        const umkmProduk = umkm.produk.toLowerCase();

        const matchKategori = kategori === '' || umkmKategori === kategori.toLowerCase();
        const matchLokasi = lokasi === '' || umkmLokasi.includes(lokasi);
        const matchKeyword = keyword === '' ||
          umkmNama.includes(keyword) ||
          umkmPemilik.includes(keyword) ||
          umkmProduk.includes(keyword);

        return matchKategori && matchLokasi && matchKeyword;
      });

      renderUMKM(filtered);
    }

    // Inisialisasi
    document.addEventListener('DOMContentLoaded', () => {
      fetch('data_umkm.json')
        .then(response => response.json())
        .then(data => {
          dataUMKM = data;
          renderUMKM(dataUMKM);
        })
        .catch(error => {
          console.error('Gagal memuat data UMKM:', error);
          document.getElementById('umkm-container').innerHTML = `
              <div class="col-12 text-center py-5 text-danger">
                <h5>Gagal memuat data UMKM.</h5>
                <p>${error.message}</p>
              </div>`;
        });

      // Event listener
      document.querySelector('form').addEventListener('submit', function (e) {
        e.preventDefault();
        filterUMKM();
      });

      document.getElementById('kategori').addEventListener('change', filterUMKM);
      document.getElementById('lokasi').addEventListener('input', filterUMKM);
      document.getElementById('keyword').addEventListener('input', filterUMKM);

      // Back to top opsional
      const backToTop = document.querySelector('.back-to-top');
      if (backToTop) {
        backToTop.addEventListener('click', function (e) {
          e.preventDefault();
          window.scrollTo({ top: 0, behavior: 'smooth' });
        });
      }
    });
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>


</html>